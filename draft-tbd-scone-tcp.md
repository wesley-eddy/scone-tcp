---
title: "SCONE TCP Option"
abbrev: "SCONE for TCP"
docname: draft-tbd-scone-tcp-00
category: std

ipr: trust200902
area: Web and Internet Transport
workgroup: SCONE
stream: IETF
keyword: Adaptive Bit-Rate Video
keyword: TCP
keyword: SCONE

stand_alone: yes
smart_quotes: no
pi: [toc, sortrefs, symrefs]

author:
  -
    ins: W. Eddy
    name: Wesley Eddy
    organization: Meta
    email: wesleyeddy@meta.com
  -
    ins: M. Joras
    name: Matt Joras
    organization: Meta
    email: matt.joras@gmail.com

normative:
  RFC9293:

informative:
  RFC9000:
  I-D.joras-scone-video-optimization-requirements:
  I-D.ietf-scone-protocol:

--- abstract

This document describes a TCP option that permits network elements to provide
TCP endpoints advice on rate limits within the network.  The functionality for
TCP is analogous to SCONE packets within the QUIC protocol.

--- middle

# SCONE Background and Introduction

Standard Communication with Network Elements (SCONE)
{{I-D.ietf-scone-protocol}} is an extension to QUIC {{RFC9000}} that provides
the capability for network elements to provide QUIC application endpoints with
guidance on potential permitted throughput, e.g. in order to make explicit the
presence of traffic limiting mechanisms within the network that can be
problematic for video streaming
{{I-D.joras-scone-video-optimization-requirements}} and other applications.

In QUIC, SCONE is negotiated between endpoints using a transport parameter, and
the QUIC endpoints send SCONE packets periodically.  The SCONE packets are
visible to network elements that modify the throughput guidance within them.

# Conventions and Definitions

{::boilerplate bcp14-tagged}

# TCP Option for SCONE

This document defines a TCP {{RFC9293}} option to provide analogous SCONE
functionality for TCP.  This could be viewed as similar to the way that TCP MSS
clamping works traditionally, with the TCP MSS options included by endpoints
being inspected and modified en-route by elements on the network path that can
provide more pertinent guidance.

## Option Format

~~~ aasvg
                         1            2            3
0           8            6            4            2
+-----------+------------+-------------------------+
|  Kind=TBD |  Length=4  |   Throughput Guidance   |
+-----------+------------+-------------------------+
~~~

The TCP option kind value (TBD) indicates the SCONE-TCP option.  The length
value of 4 is always used, along with a two byte throughput guidance.

TODO: Explain the throughput guidance values used, which should include the present QUIC values.


TODO note assumed interaction with other options, namely TCP-AO.

## Use During Handshake

Like other TCP options, SCONE-TCP is sent during connection establishment on
SYN and SYN-ACK segments, and then only used subsequently if it has been
successfully negotiated via use on the handshake.

Since it is used on the initial SYN, the SCONE-TCP option can serve as a
"client hint" that informs the behavior of traffic limiting mechanisms within
the network.

Since it is used on the SYN-ACK, the SCONE-TCP option can provide an immediate
signal to the endpoint application about the advised bitrate that can help to
inform the selection of media content to be requested subsequently within the
application.

## Use Post-Handshake

After TCP connection establishment with successful SCONE-TCP negotiation, the
option can be used at any time.  It does not need to be sent on every segment,
and providing an update may be the sole reason for sending a segment.  Since it
takes up valuable header space, and will be inspected and operated on by
network elements, it is not advisable to set on every segment that is
transmitted.  Instead, SCONE-TCP options may be included either periodically by
an endpoint (e.g. every 10 seconds as a probe before requesting new media
chunks) or generated by network elements on-demand when significant conditions
change.

### Endpoint-Included

When endpoints desire to send the SCONE-TCP option, they may either include it
within the header of segment carrying data (if there is user data to be sent),
or may include SCONE-TCP on any generated non-data-carrying ACK segment, when
no gaps exist in the received data.

Pure ACKs (without data or SACK information) MUST NOT carry SCONE-TCP when
there are gaps in the received data, because the other TCP peer would
in-general be challenged to distinguish them from duplicate ACKs that could
towards fast retransmission, for instance.

Endpoints receiving segments with the SCONE-TCP option MUST NOT treat any pure
ACKs that have SCONE-TCP as potential indicators of loss.

ACKs that carry SACK information MAY include the SCONE-TCP option.  Endpoints
receiving these MAY use the SACK information to determine reordering, loss
inference, and retransmission behavior.

### Network-Initiated

TODO: generate a pure ACK (no data) matching last observed sequence and ack values.  This is okay because it proves the device has credible threat of network violence, as assumed by SCONE.

# API for TCP Applications

TODO: describe informationally a possible socket option to request SCONE use

TODO: describe informationally a possible socket option to get SCONE info

# Security Considerations

The security considerations for SCONE-TCP are similar to those for SCONE as
present in QUIC, however, some differences arise because TCP security lacks the
same cryptographic methods that are present in QUIC.

# IANA Considerations

TODO: TCP option kind value is TBD.

--- back

# Acknowledgments
{:numbered="false"}

This document represents collaboration and inputs from others, including:

- Alan Frindell
* Bryan Tan
* Anoop Tomar
